# ═══════════════════════════════════════════════════════════════════════════════
#                    مستندات کامل پروژه سامانه مالی شهرداری اصفهان
#                 Municipality Unique Code Generation System
#                            نسخه 2.0.0 - تاریخ: ۱۴۰۳/۰۹/۲۷
# ═══════════════════════════════════════════════════════════════════════════════


################################################################################
#                           بخش اول: شمای کلی پروژه                            #
################################################################################


# 🏛️ سامانه مالی شهرداری اصفهان - شمای کلی پروژه

## نمای کلی سیستم

معماری سیستم:
┌─────────────────────────────────────────────────────────────────────────────┐
│                          لایه نمایش (Frontend)                             │
│  ┌─────────────────────────────────┐  ┌─────────────────────────────────┐  │
│  │     صفحات HTML                  │  │     اپلیکیشن React              │  │
│  │  login, portal, admin, index   │  │     Vite + TypeScript           │  │
│  └─────────────────────────────────┘  └─────────────────────────────────┘  │
└──────────────────────────────────┬──────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          لایه سرور (Backend)                               │
│  ┌─────────────────────────────────┐  ┌─────────────────────────────────┐  │
│  │     FastAPI Server              │  │     آداپتورها                   │  │
│  │     Python 3.10+                │  │  org, budget, transaction, code │  │
│  └─────────────────────────────────┘  └─────────────────────────────────┘  │
└──────────────────────────────────┬──────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          لایه داده (Database)                              │
│  ┌─────────────────────────────────┐  ┌─────────────────────────────────┐  │
│  │     PostgreSQL                  │  │     فایل‌های Excel              │  │
│  │     15+ مدل داده                │  │     داده‌های ورودی              │  │
│  └─────────────────────────────────┘  └─────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘

---

## 🎯 هدف پروژه

ایجاد یک سامانه مالی یکپارچه برای شهرداری اصفهان با قابلیت‌های:

┌──────────────────────┬─────────────────────────────────────────────────────┐
│ قابلیت               │ شرح                                                 │
├──────────────────────┼─────────────────────────────────────────────────────┤
│ تولید کد یکتا        │ تولید کدهای ۱۱ بخشی منحصربفرد برای تراکنش‌ها        │
│ مدیریت بودجه         │ ردیابی و مدیریت ردیف‌های بودجه هزینه‌ای و سرمایه‌ای │
│ ساختار سازمانی       │ مدیریت سلسله‌مراتبی مناطق، معاونت‌ها، ادارات        │
│ گردش کار تایید       │ workflow تایید/رد تراکنش‌ها توسط ادمین              │
│ گزارش‌گیری           │ داشبورد عمومی و اختصاصی برای مشاهده آمار           │
└──────────────────────┴─────────────────────────────────────────────────────┘

---

## 📐 معماری سیستم

جریان کاربران:

    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
    │  کاربر عادی  │    │  مدیر سیستم  │    │  بازدیدکننده │
    └──────┬───────┘    └──────┬───────┘    └──────┬───────┘
           │                   │                   │
           ▼                   ▼                   ▼
    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
    │  portal.html │    │  admin.html  │    │  index.html  │
    └──────┬───────┘    └──────┬───────┘    └──────┬───────┘
           │                   │                   │
           └───────────────────┼───────────────────┘
                               │
                               ▼
                    ┌─────────────────────┐
                    │    FastAPI Server   │
                    │   /auth, /org, ...  │
                    └──────────┬──────────┘
                               │
                               ▼
                    ┌─────────────────────┐
                    │     PostgreSQL      │
                    └─────────────────────┘

---

## 🔢 ساختار کد یکتای ۱۱ بخشی

┌─────────────────────────────────────────────────────────────────────────────┐
│  XX - XX - XXX - XXXXXXXX - XXX - XX - XXX - XXXXXX - XXX - XXXX - XXX      │
│   │    │    │       │        │    │    │       │       │      │     │       │
│   │    │    │       │        │    │    │       │       │      │     │       │
│   │    │    │       │        │    │    │       │       │      │     └───────┤ ترتیب
│   │    │    │       │        │    │    │       │       │      └─────────────┤ سال مالی
│   │    │    │       │        │    │    │       │       └────────────────────┤ رویداد مالی
│   │    │    │       │        │    │    │       └─────────────────────────────┤ هش ذینفع
│   │    │    │       │        │    │    └─────────────────────────────────────┤ فعالیت خاص
│   │    │    │       │        │    └──────────────────────────────────────────┤ اقدام مستمر
│   │    │    │       │        └───────────────────────────────────────────────┤ مرکز هزینه
│   │    │    │       └────────────────────────────────────────────────────────┤ کد بودجه
│   │    │    └────────────────────────────────────────────────────────────────┤ قسمت
│   │    └─────────────────────────────────────────────────────────────────────┤ اداره
│   └──────────────────────────────────────────────────────────────────────────┤ منطقه
└─────────────────────────────────────────────────────────────────────────────┘

مثال: 20-02-015-11020401-001-01-000-A1B2C3-001-1403-001

---

## 📊 مدل‌های داده

رابطه‌های اصلی:

    ┌─────────┐         ┌─────────────────┐         ┌────────────┐
    │  User   │─creates→│   Transaction   │←uses────│ BudgetItem │
    └────┬────┘         └────────┬────────┘         └────────────┘
         │                       │
         │reviews               │zone/dept/section
         │                       │
         ▼                       ▼
    ┌─────────┐         ┌─────────────────┐
    │  User   │         │    OrgUnit      │
    └─────────┘         └─────────────────┘

    ┌─────────────┐     ┌────────────────────────┐
    │ AccountCode │────→│ TemporaryAccountRecord │
    └──────┬──────┘     └────────────────────────┘
           │
           └───────────→┌────────────────────────┐
                        │ PermanentAccountRecord │
                        └────────────────────────┘

جداول اصلی:
┌──────────────────┬────────────┬─────────────────────────────────────┐
│ جدول             │ تعداد فیلد │ توضیح                               │
├──────────────────┼────────────┼─────────────────────────────────────┤
│ User             │ 10         │ کاربران سیستم                       │
│ Transaction      │ 22         │ تراکنش‌های مالی                     │
│ BudgetItem       │ 14         │ ردیف‌های بودجه                       │
│ OrgUnit          │ 5          │ ساختار سازمانی                      │
│ AccountCode      │ 15         │ کدهای یکتا                          │
│ FinancialEventRef│ 3          │ رویدادهای مالی                      │
│ CostCenterRef    │ 3          │ مراکز هزینه                         │
│ ContinuousAction │ 3          │ اقدامات مستمر                       │
└──────────────────┴────────────┴─────────────────────────────────────┘

---

## 🔄 گردش کار (Workflow)

    ┌──────────┐
    │  شروع   │
    └────┬─────┘
         │ ایجاد اولیه
         ▼
    ┌──────────┐
    │  Draft   │ ───────────────────────────────────────┐
    │ پیش‌نویس │                                        │
    └────┬─────┘                                        │
         │ ارسال برای تایید                            │ اصلاح و ارسال مجدد
         ▼                                              │
    ┌──────────┐                                        │
    │ Pending  │ ◄──────────────────────────────────────┘
    │ در انتظار │
    └────┬─────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌──────────┐  ┌──────────┐
│ Approved │  │ Rejected │
│ ✅ تایید  │  │ ❌ رد شده │
└────┬─────┘  └──────────┘
     │
     │ پس از پرداخت
     ▼
┌──────────┐
│   Paid   │
│ 💰 پرداخت│
└──────────┘

---

## 🛠️ تکنولوژی‌ها

Backend:
  • FastAPI - فریمورک وب Python
  • PostgreSQL - دیتابیس رابطه‌ای
  • SQLAlchemy - ORM
  • Pydantic - اعتبارسنجی داده
  • Uvicorn - ASGI Server
  • Argon2 - هش‌کردن رمز عبور (امنیتی)

Frontend:
  • React 18 + TypeScript
  • Vite - Build Tool
  • Radix UI - کامپوننت‌های UI
  • TailwindCSS - استایل‌دهی
  • Vazirmatn - فونت فارسی

ابزارها:
  • pandas - پردازش Excel
  • openpyxl - خواندن فایل‌های Excel


################################################################################
#                           بخش دوم: گزارش کامل پروژه                          #
################################################################################


# 📋 گزارش کامل پروژه سامانه مالی شهرداری اصفهان

تاریخ گزارش: ۱۴۰۳/۰۹/۲۷
نسخه: 2.0.0

---

## 📊 آمار کلی پروژه

┌───────────────────────────────┬─────────┐
│ معیار                         │ مقدار   │
├───────────────────────────────┼─────────┤
│ تعداد فایل‌های Backend        │ 15+     │
│ تعداد API Endpoints           │ 67+     │
│ تعداد مدل‌های دیتابیس         │ 15      │
│ تعداد کامپوننت‌های React       │ 70+     │
│ صفحات HTML                    │ 5       │
│ فایل‌های Excel پردازش‌شده     │ 10+     │
└───────────────────────────────┴─────────┘

---

## 🔌 API Endpoints

### احراز هویت (Authentication)

┌──────┬───────────────────┬────────┬──────────────────────────────────┐
│ متد  │ مسیر              │ وضعیت  │ توضیحات                          │
├──────┼───────────────────┼────────┼──────────────────────────────────┤
│ POST │ /auth/login       │ ✅     │ ورود با session cookie          │
│ POST │ /auth/logout      │ ✅     │ خروج و پاک‌سازی session         │
│ GET  │ /auth/me          │ ✅     │ اطلاعات کاربر فعلی              │
│ POST │ /auth/register    │ ✅     │ ثبت‌نام (ادمین یا اولین کاربر)  │
│ GET  │ /auth/users       │ ✅     │ لیست کاربران (فقط ادمین)        │
└──────┴───────────────────┴────────┴──────────────────────────────────┘

### ساختار سازمانی

┌──────┬─────────────────────────┬────────┬──────────────────────────────────┐
│ متد  │ مسیر                    │ وضعیت  │ توضیحات                          │
├──────┼─────────────────────────┼────────┼──────────────────────────────────┤
│ GET  │ /org/root               │ ✅     │ مناطق و معاونت‌های سطح اول      │
│ GET  │ /org/{id}/children      │ ✅     │ زیرمجموعه‌های یک واحد           │
└──────┴─────────────────────────┴────────┴──────────────────────────────────┘

### بودجه

┌──────┬───────────────────────────┬────────┬──────────────────────────────────┐
│ متد  │ مسیر                      │ وضعیت  │ توضیحات                          │
├──────┼───────────────────────────┼────────┼──────────────────────────────────┤
│ GET  │ /budgets                  │ ✅     │ همه ردیف‌های بودجه               │
│ GET  │ /budgets/by-zone/{code}   │ ✅     │ بودجه‌های یک منطقه              │
│ GET  │ /budget-items             │ ✅     │ ردیف‌ها با فیلتر                 │
│ GET  │ /budget-items/{code}      │ ✅     │ جزئیات یک ردیف                  │
└──────┴───────────────────────────┴────────┴──────────────────────────────────┘

### تراکنش‌ها (کاربر)

┌──────┬──────────────────────┬────────┬──────────────────────────────────┐
│ متد  │ مسیر                 │ وضعیت  │ توضیحات                          │
├──────┼──────────────────────┼────────┼──────────────────────────────────┤
│ POST │ /transactions        │ ✅     │ ایجاد تراکنش جدید               │
│ GET  │ /transactions/my     │ ✅     │ تراکنش‌های کاربر فعلی           │
└──────┴──────────────────────┴────────┴──────────────────────────────────┘

### مدیریت ادمین

┌──────┬────────────────────────────────────┬────────┬──────────────────────────┐
│ متد  │ مسیر                               │ وضعیت  │ توضیحات                  │
├──────┼────────────────────────────────────┼────────┼──────────────────────────┤
│ GET  │ /admin/transactions                │ ✅     │ لیست همه تراکنش‌ها       │
│ GET  │ /admin/transactions/{id}           │ ✅     │ جزئیات یک تراکنش        │
│ POST │ /admin/transactions/{id}/approve   │ ✅     │ تایید تراکنش            │
│ POST │ /admin/transactions/{id}/reject    │ ✅     │ رد تراکنش با دلیل       │
└──────┴────────────────────────────────────┴────────┴──────────────────────────┘

### سایر

┌──────┬─────────────────────────┬────────┬──────────────────────────────────┐
│ متد  │ مسیر                    │ وضعیت  │ توضیحات                          │
├──────┼─────────────────────────┼────────┼──────────────────────────────────┤
│ POST │ /portal/submit          │ ✅     │ تولید کد یکتا                   │
│ GET  │ /continuous-actions     │ ✅     │ اقدامات مستمر                   │
│ GET  │ /financial-events       │ ✅     │ رویدادهای مالی                  │
│ GET  │ /cost-centers           │ ✅     │ مراکز هزینه                     │
│ GET  │ /account-codes          │ ✅     │ کدهای یکتا                      │
└──────┴─────────────────────────┴────────┴──────────────────────────────────┘

---

## 🖥️ کامپوننت‌های Frontend

### صفحات اصلی

┌──────────────────┬────────────────────────────────┬─────────────────────────────────┐
│ کامپوننت         │ مسیر                           │ توضیحات                         │
├──────────────────┼────────────────────────────────┼─────────────────────────────────┤
│ Login            │ /components/Login.tsx          │ صفحه ورود با هدایت خودکار     │
│ UserPortal       │ /components/UserPortal.tsx     │ پرتال کاربران                  │
│ AdminDashboard   │ /components/AdminDashboard.tsx │ داشبورد مدیر                   │
│ PublicDashboard  │ /components/PublicDashboard.tsx│ داشبورد عمومی                  │
└──────────────────┴────────────────────────────────┴─────────────────────────────────┘

### Wizard Steps (7 مرحله)

┌────────┬─────────────────────────────────┬─────────────────────────────────┐
│ مرحله  │ کامپوننت                        │ تصمیم اصلی                      │
├────────┼─────────────────────────────────┼─────────────────────────────────┤
│ 1      │ WizardStep1_TransactionType     │ نوع بودجه + سال مالی           │
│ 2      │ WizardStep2_Organization        │ منطقه → اداره → قسمت          │
│ 3      │ WizardStep3_Budget              │ انتخاب ردیف بودجه             │
│ 4      │ WizardStep4_FinancialEvent      │ رویداد مالی + مرکز هزینه      │
│ 5      │ WizardStep5_Beneficiary         │ اطلاعات ذینفع + فرم‌های خاص   │
│ 6      │ WizardStep6_Preview             │ پیش‌نمایش کد یکتا              │
│ 7      │ WizardStep7_Submit              │ تایید نهایی و ثبت             │
└────────┴─────────────────────────────────┴─────────────────────────────────┘

### فرم‌های تخصصی (Step 5)

┌────────────────────────┬─────────────────────────────────┬───────────────────────────────┐
│ فرم                    │ فایل                            │ کاربرد                        │
├────────────────────────┼─────────────────────────────────┼───────────────────────────────┤
│ ContractorProgressForm │ forms/ContractorProgressForm.tsx│ صورت وضعیت پیمانکاران        │
│ CurrentExpenseForm     │ forms/CurrentExpenseForm.tsx    │ هزینه‌های جاری                │
│ PerformanceBondForm    │ forms/PerformanceBondForm.tsx   │ ضمانت‌نامه حسن انجام کار     │
│ AccountTransferForm    │ forms/AccountTransferForm.tsx   │ انتقال بین حساب‌ها           │
└────────────────────────┴─────────────────────────────────┴───────────────────────────────┘

### کامپوننت‌های UI

┌─────────────────────┬────────┬────────────────────────────────────────┐
│ دسته                │ تعداد  │ نمونه‌ها                               │
├─────────────────────┼────────┼────────────────────────────────────────┤
│ Radix UI Primitives │ 20+    │ Button, Select, Dialog, Popover        │
│ Custom Components   │ 30+    │ SegmentPopover, CodeSegmentItem        │
│ Layout Components   │ 10+    │ Card, Accordion, Tabs                  │
└─────────────────────┴────────┴────────────────────────────────────────┘

---

## 🗄️ مدل‌های دیتابیس

### جداول اصلی

┌─────────────┬───────────────┬──────────────────────────────────────────────┐
│ مدل         │ جدول          │ فیلدهای کلیدی                                │
├─────────────┼───────────────┼──────────────────────────────────────────────┤
│ User        │ users         │ username, role, default_zone_id              │
│ Transaction │ transactions  │ unique_code, status, amount, beneficiary     │
│ BudgetItem  │ budget_items  │ budget_code, budget_type, remaining_budget   │
│ OrgUnit     │ org_units     │ code, title, parent_id, org_type             │
│ AccountCode │ account_codes │ unique_code, zone_code, request_id           │
└─────────────┴───────────────┴──────────────────────────────────────────────┘

### جداول مرجع

┌───────────────────┬────────────────────────┬────────────────────────────────┐
│ مدل               │ جدول                   │ توضیح                          │
├───────────────────┼────────────────────────┼────────────────────────────────┤
│ FinancialEventRef │ financial_event_refs   │ تامین اعتبار، پیش‌پرداخت      │
│ ContinuousAction  │ continuous_actions     │ اقدامات مستمر                 │
│ CostCenterRef     │ cost_center_refs       │ مراکز هزینه                   │
│ OrgBudgetMap      │ org_budget_map         │ نگاشت سازمان به بودجه         │
└───────────────────┴────────────────────────┴────────────────────────────────┘

### جداول تراکنش

┌─────────────────────────┬────────────────────────────┬──────────────────────┐
│ مدل                     │ جدول                       │ توضیح                │
├─────────────────────────┼────────────────────────────┼──────────────────────┤
│ TemporaryAccountRecord  │ temporary_account_records  │ حساب‌های موقت       │
│ PermanentAccountRecord  │ permanent_account_records  │ حساب‌های دائمی      │
│ FinancialDocument       │ financial_documents        │ اسناد مالی          │
└─────────────────────────┴────────────────────────────┴──────────────────────┘

---

## 🔒 امنیت

┌─────────────────────┬────────┬───────────────────────────────────────────────┐
│ ویژگی               │ وضعیت  │ توضیحات                                       │
├─────────────────────┼────────┼───────────────────────────────────────────────┤
│ Password Hashing    │ ✅     │ Argon2 (مهاجرت از SHA-256)                   │
│ Session Management  │ ✅     │ Cookie-based                                  │
│ Role-Based Access   │ ✅     │ user/admin                                    │
│ CORS                │ ✅     │ پیکربندی شده                                  │
└─────────────────────┴────────┴───────────────────────────────────────────────┘

⚠️ توجه: برای محیط Production باید session storage از Redis استفاده کند.

---

## 📁 ساختار فایل‌ها

municipality_demo/
├── 📂 app/                    # Backend FastAPI
│   ├── main.py               # 67+ endpoint
│   ├── models.py             # 15 مدل
│   ├── database.py           # اتصال PostgreSQL
│   ├── auth_utils.py         # Argon2 hashing
│   └── adapters/             # آداپتورهای داده
├── 📂 figma_export/          # Frontend React
│   └── src/
│       ├── components/       # 70+ کامپوننت
│       ├── services/         # API adapters
│       └── types/            # TypeScript types
├── 📄 login.html             # صفحه ورود
├── 📄 portal.html            # پرتال کاربر
├── 📄 admin.html             # داشبورد ادمین
├── 📄 index.html             # صفحه اصلی
└── 📂 docs/                  # مستندات

---

## ✅ قابلیت‌های پیاده‌سازی شده

[x] احراز هویت و مدیریت session
[x] ویزارد ۷ مرحله‌ای ایجاد تراکنش
[x] تولید کد یکتای ۱۱ بخشی
[x] فرم‌های محاسباتی پیمانکاری
[x] داشبورد ادمین با تایید/رد
[x] لیست تراکنش‌های کاربر
[x] ساختار سازمانی سلسله‌مراتبی
[x] مدیریت بودجه (هزینه‌ای/سرمایه‌ای)
[x] پیش‌نمایش interactiv کد یکتا (Radix Popover)
[x] امنیت Argon2

---

## 📈 آمار کد

┌────────────────────┬─────────┬─────────────────┐
│ زبان               │ فایل‌ها │ خطوط (تخمین)    │
├────────────────────┼─────────┼─────────────────┤
│ Python             │ 25+     │ 3,500+          │
│ TypeScript/TSX     │ 80+     │ 8,000+          │
│ HTML               │ 5       │ 3,000+          │
│ CSS                │ 3+      │ 1,500+          │
└────────────────────┴─────────┴─────────────────┘


################################################################################
#                           بخش سوم: پرزنتیشن پروژه                             #
################################################################################


# 🎯 پرزنتیشن پروژه سامانه مالی شهرداری اصفهان

═══════════════════════════════════════════════════════════════════════════════
                              اسلاید ۱: عنوان
═══════════════════════════════════════════════════════════════════════════════

    ┌─────────────────────────────────────────────────────────────────────┐
    │                                                                     │
    │            🏛️ سامانه تولید شناسه یکتا                              │
    │                                                                     │
    │          شهرداری اصفهان - معاونت مالی و اقتصادی                    │
    │                                                                     │
    │                 نسخه: 2.0.0                                        │
    │                 تاریخ: ۱۴۰۳/۰۹/۲۷                                  │
    │                                                                     │
    │     👤 کاربر → 📝 ثبت تراکنش → 🔢 کد یکتا → ✅ تایید → 💰 پرداخت   │
    │                                                                     │
    └─────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
                           اسلاید ۲: چشم‌انداز
═══════════════════════════════════════════════════════════════════════════════

    🎯 چشم‌انداز پروژه
    ─────────────────

    مشکل:
    ┌──────────────────────────┐    ┌──────────────────────────┐
    │ ❌ قبل از سامانه         │    │ ✅ بعد از سامانه         │
    ├──────────────────────────┤    ├──────────────────────────┤
    │ کدهای تکراری             │    │ کد یکتای ۱۱ بخشی        │
    │ ردیابی دشوار             │    │ ردیابی لحظه‌ای           │
    │ بدون workflow            │    │ تایید/رد ادمین          │
    │ اکسل‌محور                │    │ دیتابیس یکپارچه         │
    └──────────────────────────┘    └──────────────────────────┘

    راه‌حل:
    سامانه‌ای یکپارچه برای:
    ✅ تولید کد یکتا     ✅ مدیریت بودجه
    ✅ گردش کار تایید    ✅ گزارش‌گیری


═══════════════════════════════════════════════════════════════════════════════
                           اسلاید ۳: معماری
═══════════════════════════════════════════════════════════════════════════════

    📐 معماری سیستم
    ───────────────

    ┌─────────────────────────────────────────────────────────────────┐
    │                     🖥️ Frontend                                │
    │    ┌───────────────────┐    ┌───────────────────┐              │
    │    │   HTML Pages      │    │  React+TypeScript │              │
    │    └───────────────────┘    └───────────────────┘              │
    └─────────────────────────────────┬───────────────────────────────┘
                                      │
                                      ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                     ⚙️ Backend                                 │
    │              ┌───────────────────────┐                         │
    │              │  FastAPI - 67+ APIs   │                         │
    │              └───────────────────────┘                         │
    └─────────────────────────────────┬───────────────────────────────┘
                                      │
                                      ▼
    ┌─────────────────────────────────────────────────────────────────┐
    │                     🗄️ Data Layer                              │
    │    ┌───────────────────┐    ┌───────────────────┐              │
    │    │    PostgreSQL     │    │   Excel Files     │              │
    │    └───────────────────┘    └───────────────────┘              │
    └─────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
                        اسلاید ۴: کد یکتای ۱۱ بخشی
═══════════════════════════════════════════════════════════════════════════════

    🔢 ساختار کد یکتا
    ─────────────────

    مثال: 20-02-015-11020401-001-01-000-A1B2C3-001-1403-001

    ┌─────────┬─────────────────────────────────────────────┐
    │ بخش     │ معنی                                        │
    ├─────────┼─────────────────────────────────────────────┤
    │ 20      │ کد منطقه/معاونت                             │
    │ 02      │ کد اداره                                    │
    │ 015     │ کد قسمت                                     │
    │ 11020401│ کد بودجه                                    │
    │ 001     │ مرکز هزینه                                  │
    │ 01      │ اقدام مستمر                                 │
    │ 000     │ فعالیت خاص                                  │
    │ A1B2C3  │ هش ذینفع                                    │
    │ 001     │ رویداد مالی                                 │
    │ 1403    │ سال مالی                                    │
    │ 001     │ شماره ترتیب                                 │
    └─────────┴─────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
                         اسلاید ۵: نقش‌های کاربری
═══════════════════════════════════════════════════════════════════════════════

    👥 نقش‌های کاربری
    ─────────────────

    ┌───────────────────────────────────────────────────────────────────┐
    │  👤 کاربر عادی                                                   │
    │  ─────────────                                                    │
    │  • ثبت تراکنش جدید (ویزارد ۷ مرحله)                              │
    │  • مشاهده تراکنش‌های خود                                         │
    │  • پیگیری وضعیت                                                  │
    └───────────────────────────────────────────────────────────────────┘

    ┌───────────────────────────────────────────────────────────────────┐
    │  👑 مدیر سیستم (ادمین)                                           │
    │  ─────────────────────                                            │
    │  • بررسی تراکنش‌ها                                               │
    │  • تایید / رد با دلیل                                            │
    │  • مشاهده آمار کلی                                               │
    └───────────────────────────────────────────────────────────────────┘

    ┌───────────────────────────────────────────────────────────────────┐
    │  👁️ بازدیدکننده عمومی                                           │
    │  ─────────────────────                                            │
    │  • مشاهده آمار عمومی                                             │
    │  • جستجوی کد یکتا                                                │
    └───────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
                         اسلاید ۶: ویزارد ثبت تراکنش
═══════════════════════════════════════════════════════════════════════════════

    📝 ویزارد ثبت تراکنش (۷ مرحله)
    ───────────────────────────────

    1️⃣ ──→ 2️⃣ ──→ 3️⃣ ──→ 4️⃣ ──→ 5️⃣ ──→ 6️⃣ ──→ 7️⃣
    نوع    سازمان   بودجه   رویداد   ذینفع   پیش‌نمایش  ثبت
    بودجه                    مالی

    ┌───────────┬───────────────────────────────────────────────────────┐
    │ مرحله     │ تصمیم اصلی                                            │
    ├───────────┼───────────────────────────────────────────────────────┤
    │ 1. نوع    │ هزینه‌ای یا سرمایه‌ای + سال مالی                      │
    │ 2. سازمان │ منطقه → اداره → قسمت                                 │
    │ 3. بودجه  │ انتخاب ردیف بودجه                                    │
    │ 4. رویداد │ رویداد مالی + مرکز هزینه                             │
    │ 5. ذینفع  │ اطلاعات ذینفع + فرم‌های خاص                          │
    │ 6. پیش‌نمایش│ مشاهده کد یکتای تولید شده                           │
    │ 7. ثبت   │ تایید نهایی                                          │
    └───────────┴───────────────────────────────────────────────────────┘

    اصل طراحی: «یک تصمیم در هر صفحه»


═══════════════════════════════════════════════════════════════════════════════
                          اسلاید ۷: گردش کار تایید
═══════════════════════════════════════════════════════════════════════════════

    🔄 گردش کار تایید
    ─────────────────

                    ┌──────────────┐
                    │   ارسال     │
                    └──────┬───────┘
                           │
                           ▼
                    ┌──────────────┐
                    │  ⏳ Pending  │
                    │   در انتظار  │
                    └──────┬───────┘
                           │
              ┌────────────┴────────────┐
              │                         │
              ▼                         ▼
       ┌──────────────┐          ┌──────────────┐
       │ ✅ Approved  │          │ ❌ Rejected  │
       │   تایید شده  │          │   رد شده     │
       └──────┬───────┘          │   + دلیل     │
              │                   └──────────────┘
              ▼
       ┌──────────────┐
       │  💰 Paid     │
       │  پرداخت شده  │
       └──────────────┘


═══════════════════════════════════════════════════════════════════════════════
                          اسلاید ۸: تکنولوژی‌ها
═══════════════════════════════════════════════════════════════════════════════

    🛠️ تکنولوژی‌ها
    ──────────────

    ┌────────────┬──────────────────┬─────────────────────────────────────┐
    │ لایه       │ تکنولوژی         │ توضیح                               │
    ├────────────┼──────────────────┼─────────────────────────────────────┤
    │ Backend    │ FastAPI          │ فریمورک وب Python                  │
    │            │ PostgreSQL       │ دیتابیس رابطه‌ای                   │
    │            │ SQLAlchemy       │ ORM                                 │
    ├────────────┼──────────────────┼─────────────────────────────────────┤
    │ Frontend   │ React 18         │ کتابخانه UI                        │
    │            │ TypeScript       │ تایپ ایمن                          │
    │            │ Radix UI         │ کامپوننت‌های accessible            │
    ├────────────┼──────────────────┼─────────────────────────────────────┤
    │ امنیت      │ Argon2           │ هش‌ رمز عبور                        │
    │            │ Session Cookies  │ مدیریت نشست                        │
    └────────────┴──────────────────┴─────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
                           اسلاید ۹: آمار پروژه
═══════════════════════════════════════════════════════════════════════════════

    📊 آمار پروژه
    ─────────────

    ┌─────────────────────────────┬─────────┐
    │ معیار                       │ مقدار   │
    ├─────────────────────────────┼─────────┤
    │ API Endpoints               │ 67+     │
    │ مدل‌های دیتابیس             │ 15      │
    │ کامپوننت‌های React           │ 70+     │
    │ خطوط کد (تخمین)             │ 16,000+ │
    └─────────────────────────────┴─────────┘

    قابلیت‌های کلیدی:
    ✅ کد یکتای ۱۱ بخشی
    ✅ فرم‌های محاسباتی پیمانکاری
    ✅ پیش‌نمایش تعاملی
    ✅ امنیت Argon2


═══════════════════════════════════════════════════════════════════════════════
                          اسلاید ۱۰: گام‌های بعدی
═══════════════════════════════════════════════════════════════════════════════

    🚀 گام‌های بعدی
    ───────────────

    کوتاه‌مدت:
    ┌─────────────────────────────────────────────────────────────────────┐
    │ [ ] یکپارچه‌سازی Redis برای session                                │
    │ [ ] تست‌های End-to-End                                             │
    │ [ ] بهینه‌سازی عملکرد                                               │
    └─────────────────────────────────────────────────────────────────────┘

    بلندمدت:
    ┌─────────────────────────────────────────────────────────────────────┐
    │ [ ] اپلیکیشن موبایل                                                │
    │ [ ] گزارش‌های پیشرفته                                               │
    │ [ ] هوش مصنوعی برای تشخیص ناهنجاری                                 │
    └─────────────────────────────────────────────────────────────────────┘


═══════════════════════════════════════════════════════════════════════════════
                          اسلاید ۱۱: پایان
═══════════════════════════════════════════════════════════════════════════════

    ┌─────────────────────────────────────────────────────────────────────┐
    │                                                                     │
    │                  📞 تماس و پشتیبانی                                 │
    │                                                                     │
    │                    شهرداری اصفهان                                  │
    │               معاونت مالی و اقتصادی                                │
    │                                                                     │
    │  ─────────────────────────────────────────────────────────────────  │
    │                                                                     │
    │                 با تشکر از توجه شما 🙏                             │
    │                                                                     │
    └─────────────────────────────────────────────────────────────────────┘


################################################################################
#                                    پایان                                     #
################################################################################

معاونت مالی و اقتصادی - شهرداری اصفهان
تاریخ تولید این مستند: ۱۴۰۳/۰۹/۲۷
